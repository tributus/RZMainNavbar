rz.widgets.RZMainNavbarWidgetHelper={MainNavbarWidgetInterface:[],MainNavbarWidgetEventHandlers:["usermenuitemclick"]},rz.widgets.RZMainNavbarRenderingWidgetHelper={userMenuitemRenderers:{},createUserMenuitemRenderers:function(n,d){this.userMenuitemRenderers[n]=d},renderAppsMenu:function($this,sb){$this.params.ui.displayAppsMenu&&(sb.appendFormat('        <div class="ui top right pointing dropdown item apps-button rz-navbar-button">'),sb.appendFormat('            <div><i class="apps-icon"></i></div>'),sb.appendFormat('            <div id="{0}appspopup" class="apps-contnt ui flowing basic admition popup top left transition hidden main-navbar-popup">',$this.params.elementID),sb.appendFormat('                <div class="dropdown-menu apps-menu">'),sb.appendFormat('                    <div class="ui form">'),sb.appendFormat('                        <div class="col-lg-12"><input id="{0}appSearchBox" type="text" class="form-control search-app-box" placeholder="{1}"></div>',$this.params.elementID,$this.params.language.searchBoxPlaceHolder),sb.appendFormat("                    </div>"),sb.appendFormat('                    <div class="doubling stackable three column ui grid container found-apps-row-container of-{0}">',$this.params.elementID),sb.appendFormat("                    </div>"),sb.appendFormat('                    <div class="delay-message-row">'),sb.appendFormat('                       <div class="ui label wait-label">'),sb.appendFormat('                           <div class="ui active inline small loader"></div>'),sb.appendFormat("                           <span>{0}</span>",$this.params.language.waitForAppsMessage),sb.appendFormat("                       </div>"),sb.appendFormat("                    </div>"),sb.appendFormat('                    <div class="more-apps-label-container">'),sb.appendFormat('                        <div class="user-name-label"><a href="#">{0}</a></div>',$this.params.language.moreApps),sb.appendFormat("                    </div>"),sb.appendFormat("                </div>"),sb.appendFormat("            </div>"),sb.appendFormat("        </div>"))},renderUserMenu:function($this,sb){if($this.params.ui.displayUserMenu&&void 0!==$this.params.userMenuItems&&$this.params.userMenuItems.length>0){var uspic=rz.widgets.RZMainNavbarRenderingWidgetHelper.resolveUserPicture($this);sb.appendFormat('        <div class="ui top right pointing dropdown item user-button rz-navbar-button">'),sb.appendFormat("            <div>{0}</div>",uspic),sb.appendFormat('            <div id="{0}usermenupopup" class="usm-contnt ui flowing basic admition popup top left transition hidden main-navbar-popup">',$this.params.elementID),sb.appendFormat('                <div class="ui equal width center aligned padded grid">'),sb.appendFormat('                    <div class="row">'),sb.appendFormat('                        <div class="column">'),sb.appendFormat('                            <div class="user-picture-big">'),sb.appendFormat("                                <div>{0}</div>",uspic),sb.appendFormat("                            </div>"),sb.appendFormat("                        </div>"),sb.appendFormat('                        <div class="column">'),sb.appendFormat('                            <div class="ui secondary vertical rz menu">');var idx=0;$this.params.userMenuItems.forEach(function(item){var renderer=void 0;renderer=void 0===item.renderer?$this.renderHelpers.userMenuitemRenderers.defaultUserMenuItemRenderer:"string"==typeof item.renderer?$this.renderHelpers.userMenuitemRenderers[item.renderer]:item.renderer,sb.appendFormat('<a id="{1}_usermenuitem_{2}" data-action="{3}" class="item usermenuitem" data-behaviors="{4}">{0}</a>',renderer(item),$this.params.elementID,idx++,item.action,item.behaviors||"")}),sb.appendFormat("                            </div>"),sb.appendFormat("                        </div>"),sb.appendFormat("                    </div>"),sb.appendFormat('                    <div class="rz-nopaded row">'),sb.appendFormat('                        <div class="column">'),sb.appendFormat('                            <div class="user-menu-footer">'),sb.appendFormat("                                {0}",$this.params.userInfo.fullName),sb.appendFormat("                            </div>"),sb.appendFormat("                        </div>"),sb.appendFormat("                    </div>"),sb.appendFormat("                </div>"),sb.appendFormat("            </div>"),sb.appendFormat("        </div>")}},renderAppList:function($this,searchResult,status,sender,page){if("success"==status)if(void 0!==searchResult&&searchResult.length>0){var sb=new StringBuilder,itemCount=0;searchResult.forEach(function(row){0==itemCount++&&sb.append('<div class="row found-apps-row">'),sb.appendFormat('<div class="column">'),sb.appendFormat('    <a href="apps?appid={0}" class="app-button">',row.appuid),sb.appendFormat('        <img src="{0}">',row.iconurl),sb.appendFormat("        <span>{0}</span>",row.label),sb.appendFormat("    </a>"),sb.appendFormat("</div>"),3==itemCount&&(sb.append("</div>"),itemCount=0)}),page>0?$(".of-"+$this.params.elementID+".found-apps-row-container").append(sb.toString()):$(".of-"+$this.params.elementID+".found-apps-row-container").html(sb.toString())}else page>0?sender.foo="bah":$(".of-"+$this.params.elementID+".found-apps-row-container").html('<p class="not-found-message">'+$this.params.language.notfound+"</p>");else{var sb=new StringBuilder;sb.appendFormat('<div class="ui orange label large apps-search-error-message">'),sb.appendFormat('<i class="warning circle icon ic" aria-hidden="true"></i>'),sb.appendFormat("<span>{0}</span>",$this.params.language.loadapperror),sb.appendFormat("</div>"),$(".found-apps-row-container").html(sb.toString())}$(".delay-message-row").fadeOut(300)},resolveUserPicture:function($this){return void 0===$this.params.userInfo.userPicture?function(s){for(var avoidable=$this.params.language.avoidable2;-1!=avoidable.indexOf(s.substr(0,2));)s=s.substr(1);return s}($this.params.userInfo.fullName+"??").toUpperCase().substr(0,2):'<img src="*">'.replace("*",$this.params.userInfo.userPicture)}},rz.widgets.RZMainNavbarRenderingWidgetHelper.createUserMenuitemRenderers("defaultUserMenuItemRenderer",function(data){return data.text}),rz.widgets.RZMainNavbarRenderingWidgetHelper.createUserMenuitemRenderers("defaultUserMenuItemRendereWithLabel",function(data){return'* <div class="ui orange label menu-item-label">*</div>'.replace("*",data.text).replace("*",data.labelValue||"")}),rz.widgets.MainNavbarWidget=ruteZangada.widget("rzMainNavbar",rz.widgets.RZMainNavbarWidgetHelper.MainNavbarWidgetInterface,rz.widgets.RZMainNavbarWidgetHelper.MainNavbarWidgetEventHandlers,function(){var $this=this;$this.renderHelpers=rz.widgets.RZMainNavbarRenderingWidgetHelper,this.initialize=function(params,initialized){var elementID=generateRandomID(8),defaultParams={elementID:elementID,uiApiBaseUrl:"http://localhost:3000/api/apps",brandNavUrl:"#",userInfo:{fullName:"unknow user",userPicture:void 0,userName:void 0},ui:{rootElementClass:"ui top attached main menu",appsButtonRenderer:$this.renderHelpers.renderAppsMenu,userMenuRenderer:$this.renderHelpers.renderUserMenu,appsListRenderer:$this.renderHelpers.renderAppList,displayAppsMenu:!0,displayUserMenu:!0},language:{avoidable2:"cusspt",searchBoxPlaceHolder:"search for apps",waitForAppsMessage:"please wait...",moreApps:"more apps",notfound:"no items found",loadapperror:"an error has ocurred when searching for apps. Try again in few seconds. If the problem remains, contact technical support."},userMenuItems:[]};$this.params=$.extend(!0,{},defaultParams,params),initialized()},this.render=function(target){var sb=new StringBuilder;sb.appendFormat('<div id="{0}" class="{1} rz-navbar">',$this.params.elementID,$this.params.ui.rootElementClass),sb.appendFormat('    <a class="navbar-brand" href="{0}"><div class="brand"></div></a>',$this.params.brandNavUrl),sb.appendFormat('    <div class="right menu">'),$this.params.ui.appsButtonRenderer($this,sb),$this.params.ui.userMenuRenderer($this,sb),sb.appendFormat("    </div>"),sb.appendFormat("</div>"),$("#"+target).html(sb.toString()),executePostRenderScripts()};var hasBehavior=function(behavior,el){return-1!=getBehaviors(el).indexOf(behavior)},getBehaviors=function(el){var b=$(el.currentTarget).data("behaviors");return void 0===b?[]:b.split(";")},executePostRenderScripts=function(){if($this.params.ui.displayUserMenu&&($("#"+$this.params.elementID+" .user-button").popup({popup:$("#"+$this.params.elementID+"usermenupopup"),on:"click"}),$("#"+$this.params.elementID+" .usermenuitem").click(function(e){var action=$(e.currentTarget).data("action");void 0!==action&&(hasBehavior("no-hide-popup-when-click",e)||$("#"+$this.params.elementID+" .user-button").popup("hide"),$this.raiseEvent("usermenuitemclick",{action:action,behaviors:getBehaviors(e)},$this))})),$this.params.ui.displayAppsMenu){$("#"+$this.params.elementID+" .apps-button").popup({popup:$("#"+$this.params.elementID+"appspopup"),on:"click"});var searchOptions={dataSource:$this.params.uiApiBaseUrl,keySource:"#"+$this.params.elementID+"appSearchBox",renderResultsMethod:function(searchResult,status,sender,page){$this.params.ui.appsListRenderer($this,searchResult,status,sender,page)},pageSize:12,enableInfiniteScroll:!0,targetResultElement:".found-apps-row-container",delayed:function(){$(".delay-message-row").fadeIn(300)}},appSearcher=new rz.plugins.SearchDataPlugin(searchOptions);appSearcher.searchData("")}}});